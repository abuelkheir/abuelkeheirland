/*
 * ADC_pro.c
 *
 *  Created on: Aug 23, 2021
 *      Author: a7med
 */
#include "BIT_MATH.h"
#include "STD_TYPES.h"
#include "ATMEGA32REGISTERS.h"
#include "DIO_int.h"
#include "ADC.h"


	void ADC_Init (void)    // ADC Initialization And Enable
	{

		 // efta7 el data sheet we efham
		// ADC Enable
		ADCSRA_REG.Bits.BIT_0=1;

		// Pre-scaler Configuration as 128
		 ADCSRA_REG.Bits.BIT_0=1;
		 ADCSRA_REG.Bits.BIT_1=1;
		 ADCSRA_REG.Bits.BIT_2=1;

		// Reference Voltage as AVCC with external capacitor
         ADCSRA_REG.Bits.BIT_7=1;
		 ADCSRA_REG.Bits.BIT_6=0;

		// ADC Data Right Adjustment
		 ADCSRA_REG.Bits.BIT_5=0;


	}
	u16 ADC_Read (u8 channel)     // Read From The ADC Channel
	{
		u16 Local_Result;
		// ADC Channel Selection
		ADCSRA_REG.Whole_Register &=ADC_ACDMUX_CHANNEL_CLEAR_MASK;
		ADMUX_REG.Whole_Register |=channel;

		// Start Single Conversion
		ADCSRA_REG.Bits.BIT_6=1;

		//wait for the conversion
		while(!(ADCSRA_REG.Bits.BIT_4));
		return Local_Result;
	}
